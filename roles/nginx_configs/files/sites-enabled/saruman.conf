server {
    listen 80; ## listen for ipv4

    server_name materiaal.12urenloop.be;
    root /home/saruman/production/current/public/;

    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires 1y;
        add_header Cache-Control public;
    }

    send_timeout 300s;

    location @app {
        proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;
        proxy_set_header    X-Sendfile-Type     X-Accel-Redirect;
        proxy_set_header    X-Accel-Mapping     /home/saruman/production/current/public/=/;
        proxy_set_header    Host                $http_host;
        proxy_send_timeout 300s;
        proxy_read_timeout 300s;

        proxy_pass http://unix:/var/run/unicorn/saruman.sock;
    }

    try_files $uri/index.html $uri.html $uri @app;

    access_log /home/saruman/log/access.log;
    error_log /home/saruman/log/error.log;
}

